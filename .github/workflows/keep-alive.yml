name: Keep Telegram Bot Alive

on:
  schedule:
    # Run every 5 minutes
    - cron: '*/5 * * * *'
  workflow_dispatch: # Manual trigger

jobs:
  ping-bot:
    runs-on: ubuntu-latest
    
    steps:
    - name: Ping Bot Health Endpoint
      run: |
        curl -f -X GET "https://telegram-bot-1-r3gl.onrender.com/health" || \
        echo "Health endpoint failed, trying /ping endpoint..."
        
    - name: Ping Bot Ping Endpoint  
      run: |
        curl -f -X GET "https://telegram-bot-1-r3gl.onrender.com/ping" || \
        echo "Ping endpoint failed, trying /keep-alive endpoint..."
        
    - name: Ping Bot Keep-Alive Endpoint
      run: |
        curl -f -X GET "https://telegram-bot-1-r3gl.onrender.com/keep-alive" || \
        echo "Keep-alive endpoint failed, trying /status endpoint..."
        
    - name: Ping Bot Status Endpoint
      run: |
        curl -f -X GET "https://telegram-bot-1-r3gl.onrender.com/status" || \
        echo "All endpoints failed - bot may be down"
